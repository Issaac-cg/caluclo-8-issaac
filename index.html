<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Gráfica y Dominio/Rango de Funciones</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; }
  label, input, select, button { margin: 8px 0; display: block; }
  #plot { width: 700px; height: 500px; margin-top: 20px; }
  #result { margin-top: 15px; font-weight: bold; }
</style>
</head>
<body>
<h2>Graficador de Funciones con Dominio y Rango</h2>
<form id="form">
  <label>Tipo de función:
    <select id="tipoFunc">
      <option value="lineal">Lineal (y = mx + b)</option>
      <option value="cuadratica">Cuadrática (y = ax² + bx + c)</option>
    </select>
  </label>
  <label>Coeficiente a (pendiente o cuadrático): <input type="number" id="a" value="1" step="any" required></label>
  <label>Coeficiente b: <input type="number" id="b" value="0" step="any" required></label>
  <label>Coeficiente c (solo para cuadrática): <input type="number" id="c" value="0" step="any"></label>
  <label>Intervalo de x mínimo: <input type="number" id="xMin" value="-10" step="any" required></label>
  <label>Intervalo de x máximo: <input type="number" id="xMax" value="10" step="any" required></label>
  <button type="submit">Graficar</button>
</form>

<div id="result"></div>
<div id="plot"></div>

<script>
document.getElementById('form').addEventListener('submit', function(e){
  e.preventDefault();
  const tipo = document.getElementById('tipoFunc').value;
  const a = parseFloat(document.getElementById('a').value);
  const b = parseFloat(document.getElementById('b').value);
  const c = parseFloat(document.getElementById('c').value);
  const xMin = parseFloat(document.getElementById('xMin').value);
  const xMax = parseFloat(document.getElementById('xMax').value);

  if (xMax <= xMin) {
    alert('El valor máximo de x debe ser mayor que el mínimo.');
    return;
  }

  const n = 500;
  const xValues = [];
  const yValues = [];
  const step = (xMax - xMin) / n;

  for(let i = 0; i <= n; i++) {
    let x = xMin + step * i;
    xValues.push(x);
    let y;
    if(tipo === 'lineal') {
      y = a * x + b;
    } else {
      y = a * x * x + b * x + c;
    }
    yValues.push(y);
  }

  // Calcular rango aproximado
  const yMin = Math.min(...yValues);
  const yMax = Math.max(...yValues);

  // Mostrar dominio y rango
  document.getElementById('result').innerHTML = 
    `<p>Dominio: [${xMin}, ${xMax}]</p>` +
    `<p>Rango aproximado: [${yMin.toFixed(3)}, ${yMax.toFixed(3)}]</p>`;

  // Graficar con Plotly
  const trace = {
    x: xValues,
    y: yValues,
    mode: 'lines',
    name: 'Función',
    line: {color: 'blue'}
  };

  const layout = {
    title: 'Gráfica de la función',
    xaxis: {title: 'x'},
    yaxis: {title: 'y'},
    margin: {t: 40, b: 40, l: 50, r: 20}
  };

  Plotly.newPlot('plot', [trace], layout);
});
</script>
</body>
</html>
